import{a as q,c as G,e as J,n as K,p as Q}from"./chunk-LHJOZ67R.js";import{c as A,d as W,i as N,j as R,l as D,r as H,t as $}from"./chunk-NIGWU2LA.js";import{Ga as F,Ma as g,O as j,T as x,Ua as d,Va as z,Xa as r,Ya as a,Za as C,_a as v,aa as u,ba as m,bb as f,cb as l,eb as S,f as I,fb as L,gb as p,hb as y,ib as h,j as T,kb as P,lb as w,mb as M,q as E,qb as O,sa as b,tb as k,ua as V,ub as U,wa as o,xa as B}from"./chunk-SSAAJQVM.js";var _=class i{constructor(t,e){this.apiService=t;this.http=e;this.baseUrl=this.apiService.getBaseUrl(),this.productsUrl=`${this.baseUrl}/products`}baseUrl;productsUrl;selectedCategorySubject=new T(null);selectedCategory$=this.selectedCategorySubject.asObservable();getProducts(){return this.http.get(this.productsUrl)}getCategories(){return new I(t=>{this.http.get(this.productsUrl).subscribe(e=>{let s=new Set,n=[];e.forEach(c=>{s.has(c.category)||(s.add(c.category),n.push({name:c.category,image:c.image}))}),t.next(n),t.complete()})})}getBestSellers(){return this.http.get(`${this.productsUrl}?best_seller_ne=null&_sort=best_seller&_order=desc`)}getNewArrivals(){return this.http.get(`${this.productsUrl}?new_arrival=true`)}getAvailableColors(){return this.http.get(this.productsUrl).pipe(E(t=>{let e=new Set;return t.forEach(s=>{s.color_available.forEach(n=>{n.includes("/")||e.add(n)})}),Array.from(e)}))}getProductById(t){return this.http.get(`${this.productsUrl}/${t}`)}setSelectedCategory(t){this.selectedCategorySubject.next(t)}getSelectedCategory(){return this.selectedCategorySubject.getValue()}static \u0275fac=function(e){return new(e||i)(x(Q),x(D))};static \u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})};function ee(i,t){i&1&&(r(0,"span",6),p(1,"Cerca"),a())}function te(i,t){if(i&1&&(r(0,"div",10),C(1,"img",11),r(2,"div",12)(3,"h5"),p(4),a(),r(5,"p"),p(6),a(),r(7,"p"),p(8),a()()()),i&2){let e=t.$implicit;S("routerLink","/product/",e.id,""),o(),d("src",(e.image==null?null:e.image[0])||"/img/default.jpg",b)("alt",e.name),o(3),y(e.name),o(2),h("Categoria: ",e.category,""),o(2),h("Prezzo: \u20AC",(e.price==null?null:e.price.toFixed(2))||"N/A","")}}function ie(i,t){if(i&1&&(r(0,"div",7),g(1,te,9,7,"div",8),O(2,"slice"),r(3,"div",9),p(4),a()()),i&2){let e=l(2);o(),d("ngForOf",k(2,2,e.results,0,3)),o(3),h("Vedi tutti (",e.results.length,")")}}function ne(i,t){if(i&1){let e=v();r(0,"div",2),f("click",function(){u(e);let n=l();return m(n.expandSearchBar())}),g(1,ee,2,0,"span",3),r(2,"input",4),M("ngModelChange",function(n){u(e);let c=l();return w(c.searchText,n)||(c.searchText=n),m(n)}),f("input",function(){u(e);let n=l();return m(n.getSearchResults())})("blur",function(){u(e);let n=l();return m(n.collapseSearchBar())}),a(),g(3,ie,5,6,"div",5),a()}if(i&2){let e=l();z("expanded",e.isExpanded),o(),d("ngIf",!e.isExpanded),o(),P("ngModel",e.searchText),o(),d("ngIf",e.results.length>0)}}function re(i,t){if(i&1&&(r(0,"div",10),C(1,"img",11),r(2,"div",12)(3,"h5"),p(4),a(),r(5,"p"),p(6),a(),r(7,"p"),p(8),a()()()),i&2){let e=t.$implicit;S("routerLink","/product/",e.id,""),o(),d("src",(e.image==null?null:e.image[0])||"/img/default.jpg",b)("alt",e.name),o(3),y(e.name),o(2),h("Categoria: ",e.category,""),o(2),h("Prezzo: \u20AC",(e.price==null?null:e.price.toFixed(2))||"N/A","")}}function oe(i,t){if(i&1&&(r(0,"div",21),p(1),a()),i&2){let e=l(2);o(),h("Vedi tutti (",e.results.length,")")}}function ae(i,t){if(i&1){let e=v();r(0,"div",13)(1,"div",14),p(2,"Chiudi"),a(),r(3,"div",15),p(4,"Cerca"),a(),r(5,"div",16)(6,"input",17),M("ngModelChange",function(n){u(e);let c=l();return w(c.searchText,n)||(c.searchText=n),m(n)}),f("input",function(){u(e);let n=l();return m(n.getSearchResults())})("blur",function(){u(e);let n=l();return m(n.collapseSearchBar())}),a()(),r(7,"div",18),g(8,re,9,7,"div",19),O(9,"slice"),g(10,oe,2,1,"div",20),a()()}if(i&2){let e=l();o(6),P("ngModel",e.searchText),o(2),d("ngForOf",k(9,3,e.results,0,8)),o(2),d("ngIf",e.results.length>0)}}var X=class i{constructor(t){this.productsService=t}isExpanded=!1;searchText="";results=[];allProducts=[];Desktop=!0;onResize(){this.checkBodyWidth()}checkBodyWidth(){let t=document.body.clientWidth;this.Desktop=t>810}ngOnInit(){this.checkBodyWidth(),this.productsService.getProducts().subscribe({next:t=>{this.allProducts=t},error:t=>{console.error("Errore nel recupero dei prodotti:",t)}})}expandSearchBar(){this.isExpanded=!0}collapseSearchBar(){this.searchText||(this.isExpanded=!1,this.results=[])}getSearchResults(){if(this.searchText){console.log("Cerca:",this.searchText);let t=this.searchText.toLowerCase();this.results=this.allProducts.filter(e=>e.name.toLowerCase().includes(t))}else this.results=[];console.log("Risultati:",this.results)}static \u0275fac=function(e){return new(e||i)(B(_))};static \u0275cmp=F({type:i,selectors:[["app-search"]],hostBindings:function(e,s){e&1&&f("resize",function(c){return s.onResize(c)},!1,V)},decls:3,vars:2,consts:[["mobile",""],["class","search-bar d-flex align-items-center justify-content-center",3,"expanded","click",4,"ngIf","ngIfElse"],[1,"search-bar","d-flex","align-items-center","justify-content-center",3,"click"],["class","search-label mx-2",4,"ngIf"],["type","text","placeholder","Cerca...",1,"search-input",3,"ngModelChange","input","blur","ngModel"],["class","result",4,"ngIf"],[1,"search-label","mx-2"],[1,"result"],["class","result-item",3,"routerLink",4,"ngFor","ngForOf"],["routerLink","/products",1,""],[1,"result-item",3,"routerLink"],[1,"result-image",3,"src","alt"],[1,"result-details"],[1,"mobile"],["routerLink","",1,"search-close-mobile","w-100","d-flex","justify-content-center","align-items-center"],[1,"search-bar-mobile","w-100","d-flex","justify-content-center","align-items-center"],[1,"d-flex","justify-content-center","align-items-center"],["type","text","placeholder","    Cerca...",1,"search-input-mobile","my-2",3,"ngModelChange","input","blur","ngModel"],[1,"result-mobile","position-relative"],["class","result-item ",3,"routerLink",4,"ngFor","ngForOf"],["class","position-absolute bottom-0 w-100 d-flex justify-content-center align-items-center","routerLink","/products",4,"ngIf"],["routerLink","/products",1,"position-absolute","bottom-0","w-100","d-flex","justify-content-center","align-items-center"]],template:function(e,s){if(e&1&&g(0,ne,4,5,"div",1)(1,ae,11,7,"ng-template",null,0,U),e&2){let n=L(2);d("ngIf",s.Desktop)("ngIfElse",n)}},dependencies:[R,A,W,N,$,H,K,q,G,J],styles:['@charset "UTF-8";.search-bar[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#1d242b;border-radius:25px;padding:5px 10px;width:70px;height:40px;transition:width .4s ease,background-color .4s ease;cursor:pointer;position:relative}.search-bar.expanded[_ngcontent-%COMP%]{width:300px}.search-label[_ngcontent-%COMP%]{position:absolute;left:10px;font-size:16px;color:#fafafa;white-space:nowrap;transition:transform .4s ease,opacity .4s ease}.search-bar.expanded[_ngcontent-%COMP%]   .search-label[_ngcontent-%COMP%]{transform:translate(-100%);opacity:0}.search-input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;background:transparent;font-size:16px;padding:5px;opacity:0;visibility:hidden;transition:opacity .4s ease,visibility .4s ease;color:#fafafa}.search-bar.expanded[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{opacity:1;visibility:visible}.search-input[_ngcontent-%COMP%]::placeholder{color:#fafafa}.result[_ngcontent-%COMP%]{position:absolute;top:50px;left:0;width:100%;background:#fafafa;border-radius:0 0 10px 10px;box-shadow:0 2px 5px #0003;z-index:1000;padding:10px;overflow-y:auto}.result-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px;cursor:pointer;border-bottom:1px solid #FAFAFA;transition:background-color .2s ease}.result-item[_ngcontent-%COMP%]:hover{background-color:#fafafa}.result-item[_ngcontent-%COMP%]   .result-image[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:5px;margin-right:10px;object-fit:cover}.result-item[_ngcontent-%COMP%]   .result-details[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#1d242b}.result-item[_ngcontent-%COMP%]   .result-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#0077c0}.mobile[_ngcontent-%COMP%]   .search-close-mobile[_ngcontent-%COMP%]{background-color:#fafafa;height:50px}.mobile[_ngcontent-%COMP%]   .search-bar-mobile[_ngcontent-%COMP%]{background-color:#0077c0;width:100%;height:50px;color:#fafafa}.mobile[_ngcontent-%COMP%]   .search-input-mobile[_ngcontent-%COMP%]{background-color:#fafafa;border:none;width:80%;border-radius:30px;height:50px}.mobile[_ngcontent-%COMP%]   .result-mobile[_ngcontent-%COMP%]{background-color:#fafafa99;height:80vh}']})};export{_ as a,X as b};
