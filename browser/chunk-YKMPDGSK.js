import{a as q}from"./chunk-M6WNSHEN.js";import{a as b}from"./chunk-74MJURPX.js";import{a as B,b as R}from"./chunk-VZ3NEUIT.js";import"./chunk-CQE7WRDC.js";import{a as D,b as j}from"./chunk-6N6B5WLE.js";import{a as V,c as L,e as U,n as z}from"./chunk-LHJOZ67R.js";import{b as F,c as A,d as T,h as N,j as W}from"./chunk-NIGWU2LA.js";import{Ga as S,Ma as O,Ua as l,Xa as t,Ya as i,Za as u,_a as E,aa as w,ba as C,bb as m,cb as h,db as y,gb as r,hb as x,ib as p,kb as f,lb as v,mb as _,pb as M,qb as I,sa as P,sb as k,wa as s,xa as g}from"./chunk-SSAAJQVM.js";var G=(c,o)=>({success:c,error:o});function J(c,o){c&1&&(t(0,"div"),r(1,"Nessun preferito salvato."),i())}function K(c,o){if(c&1){let n=E();t(0,"div",15),u(1,"img",16),t(2,"div",17)(3,"h4"),r(4),i(),t(5,"p"),r(6),i(),t(7,"p"),r(8),i(),t(9,"p"),r(10),I(11,"currency"),i(),t(12,"button",5),m("click",function(){let d=w(n).$implicit,a=h();return C(a.removeFromFavorites(d))}),r(13,"Rimuovi"),i(),t(14,"button",18),m("click",function(){let d=w(n).$implicit,a=h();return C(a.addToCart(d))}),r(15,"Aggiungi al carrello"),i()()()}if(c&2){let n=o.$implicit;s(),y("alt",n.name),l("src",n.img,P),s(3),x(n.name),s(2),p("Colore: ",n.color,""),s(2),p("Taglia: ",n.size,""),s(2),x(k(11,6,n.price,"EUR"))}}var H=class c{constructor(o,n,e){this.accountService=o;this.usersService=n;this.cartService=e}newEmail="";newPassword="";confirmPassword="";favorites=[];emailMessage="";passwordMessage="";ngOnInit(){this.loadFavorites()}changeEmail(){if(this.emailMessage="",!b.validateEmail(this.newEmail)){this.emailMessage="\u274C Inserisci un\u2019email valida.";return}this.accountService.updateEmail(this.newEmail).subscribe(()=>{this.emailMessage="\u2705 Email aggiornata con successo!",this.newEmail=""})}changePassword(){if(this.passwordMessage="",!b.validatePassword(this.newPassword)){this.passwordMessage="\u274C La password deve avere almeno 8 caratteri, una lettera maiuscola e un numero.";return}if(this.newPassword!==this.confirmPassword){this.passwordMessage="\u274C Le password non corrispondono.";return}this.accountService.updatePassword(this.newPassword).subscribe(()=>{this.passwordMessage="\u2705 Password aggiornata con successo!",this.newPassword="",this.confirmPassword=""})}loadFavorites(){this.usersService.userId$.subscribe(o=>{o&&this.accountService.getFavorites().subscribe(n=>{this.favorites=n.filter(e=>e.userID===o)})})}removeFromFavorites(o){this.accountService.removeFavorite(o.id).subscribe(()=>{this.favorites=this.favorites.filter(n=>n.id!==o.id)})}addToCart(o){o.id&&(this.cartService.addToCart(o),this.accountService.removeFavorite(o.id).subscribe(()=>{this.loadFavorites()}))}static \u0275fac=function(n){return new(n||c)(g(q),g(D),g(j))};static \u0275cmp=S({type:c,selectors:[["app-account"]],decls:30,vars:15,consts:[[1,"account-container","p-5"],[1,"account-wrapper"],[1,"form-group"],["for","email"],["type","email","id","email","placeholder","Inserisci nuova email",3,"ngModelChange","ngModel"],[3,"click"],[1,"message",3,"ngClass"],["for","password"],["type","password","id","password","placeholder","Inserisci nuova password",3,"ngModelChange","ngModel"],["for","confirmPassword"],["type","password","id","confirmPassword","placeholder","Conferma password",3,"ngModelChange","ngModel"],[1,"account-section"],[4,"ngIf"],["class","favorite-item",4,"ngFor","ngForOf"],[1,""],[1,"favorite-item"],[1,"",3,"src","alt"],[1,"favorite-item-details"],[1,"add-to-cart-button",3,"click"]],template:function(n,e){n&1&&(u(0,"app-nav"),t(1,"div",0)(2,"h2"),r(3,"Il Mio Account"),i(),t(4,"div",1)(5,"div",2)(6,"label",3),r(7,"Nuova Email"),i(),t(8,"input",4),_("ngModelChange",function(a){return v(e.newEmail,a)||(e.newEmail=a),a}),i(),t(9,"button",5),m("click",function(){return e.changeEmail()}),r(10,"Aggiorna Email"),i(),t(11,"p",6),r(12),i()(),t(13,"div",2)(14,"label",7),r(15,"Nuova Password"),i(),t(16,"input",8),_("ngModelChange",function(a){return v(e.newPassword,a)||(e.newPassword=a),a}),i(),t(17,"label",9),r(18,"Conferma Password"),i(),t(19,"input",10),_("ngModelChange",function(a){return v(e.confirmPassword,a)||(e.confirmPassword=a),a}),i(),t(20,"button",5),m("click",function(){return e.changePassword()}),r(21,"Aggiorna Password"),i(),t(22,"p",6),r(23),i()(),t(24,"div",11)(25,"h3"),r(26,"Lista Preferiti \u2764\uFE0F"),i(),O(27,J,2,0,"div",12)(28,K,16,9,"div",13),i()()(),u(29,"app-footer",14)),n&2&&(s(8),f("ngModel",e.newEmail),s(3),l("ngClass",M(9,G,e.emailMessage.includes("\u2705"),e.emailMessage.includes("\u274C"))),s(),p(" ",e.emailMessage," "),s(4),f("ngModel",e.newPassword),s(3),f("ngModel",e.confirmPassword),s(3),l("ngClass",M(12,G,e.passwordMessage.includes("\u2705"),e.passwordMessage.includes("\u274C"))),s(),p(" ",e.passwordMessage," "),s(4),l("ngIf",e.favorites.length===0),s(),l("ngForOf",e.favorites))},dependencies:[z,V,L,U,W,F,A,T,N,R,B],styles:["[_nghost-%COMP%]{display:block;min-height:100vh}.account-container[_ngcontent-%COMP%]{min-height:88vh;max-width:800px;margin:auto;text-align:center;background:#fafafa;border-radius:10px;box-shadow:0 4px 8px #0000001a}.account-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.account-section[_ngcontent-%COMP%]{background:#fafafa;padding:20px;border-radius:10px;box-shadow:0 4px 10px #0000001a}input[_ngcontent-%COMP%]{width:100%;padding:10px;margin:10px 0;border:1px solid #0077c0;border-radius:5px}button[_ngcontent-%COMP%]{padding:10px 15px;border:none;background-color:#0077c0;color:#fafafa;cursor:pointer;border-radius:5px;transition:.3s;border:1px solid #0077c0}button[_ngcontent-%COMP%]:hover{background-color:#fafafa;color:#0077c0;border:1px solid #0077c0}.favorite-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:10px}.favorite-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:5px}.account-section[_ngcontent-%COMP%]{margin-top:30px;padding:20px;background:#fafafa;border-radius:10px;box-shadow:0 4px 8px #0000001a}h3[_ngcontent-%COMP%]{font-size:22px;font-weight:700;margin-bottom:15px;display:flex;align-items:center}.favorite-item[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f9f9f9;border-radius:8px;padding:15px;margin-bottom:10px;box-shadow:inset 0 0 10px #0000001a;transition:transform .2s ease-in-out}.favorite-item[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 4px 10px #00000026}.favorite-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:5px;object-fit:cover;margin-right:15px}.favorite-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;margin:0}.favorite-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#007bff;margin:5px 0}.favorite-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#ff4d4d;color:#fff;padding:8px 12px;border:none;border-radius:5px;cursor:pointer;transition:background .2s ease-in-out}.favorite-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#c00}.favorite-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;height:100%}.favorite-item[_ngcontent-%COMP%]   .favorite-item-details[_ngcontent-%COMP%]{flex:1;height:100%;display:flex;flex-direction:column;align-items:center;gap:10px}.favorite-item[_ngcontent-%COMP%]   .favorite-item-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1}.favorite-item[_ngcontent-%COMP%]   .favorite-item-details[_ngcontent-%COMP%]   .add-to-cart-button[_ngcontent-%COMP%]{background-color:#0077c0}"]})};export{H as AccountComponent};
