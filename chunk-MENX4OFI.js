import{a as N,b as W}from"./chunk-VAXYI5TX.js";import{a as q}from"./chunk-CQE7WRDC.js";import{a as L,b as j}from"./chunk-6N6B5WLE.js";import"./chunk-LHJOZ67R.js";import{b as V,c as $,d as z,f as F,h as B,j as R,r as U,t as Q}from"./chunk-NIGWU2LA.js";import{Ga as D,I as M,Ma as C,Ua as s,Xa as t,Ya as i,Za as y,_a as b,a as k,aa as u,ba as x,bb as _,cb as p,fb as E,gb as n,hb as d,ib as v,ob as w,q as P,qb as g,rb as I,sa as S,sb as f,ua as T,ub as h,wa as r,xa as O}from"./chunk-SSAAJQVM.js";var G=a=>({"d-flex flex-column":a});function A(a,o){a&1&&(t(0,"div",14)(1,"h2"),n(2,"Il tuo carrello e\u0300 vuoto"),i()())}function J(a,o){if(a&1){let e=b();t(0,"div",16)(1,"div",17),y(2,"img",18),i(),t(3,"div",19)(4,"h3",20),n(5),i(),t(6,"p",21),n(7),i(),t(8,"p",22),n(9),i(),t(10,"p",23),n(11),i()(),t(12,"div",24)(13,"div",25)(14,"button",26),_("click",function(){let l=u(e).$implicit,m=p(3);return x(m.decreaseQuantity(l))}),n(15,"-"),i(),t(16,"span"),n(17),i(),t(18,"button",26),_("click",function(){let l=u(e).$implicit,m=p(3);return x(m.increaseQuantity(l))}),n(19,"+"),i()(),t(20,"p",27),n(21),g(22,"currency"),i(),t(23,"button",28),_("click",function(){let l=u(e).$implicit,m=p(3);return x(m.removeItemLocal(l))}),n(24,"\u{1F5D1}\uFE0F"),i()()()}if(a&2){let e=o.$implicit;r(2),s("src",e.img,S),r(3),d(e.name),r(2),v("Scarpa \u2013 ",e.category,""),r(2),v("Colore \u2013 ",e.color,""),r(2),v("Taglia/misura: ",e.size,""),r(6),d(e.quantity),r(4),d(f(22,7,e.price*e.quantity,"EUR"))}}function K(a,o){if(a&1&&(t(0,"div"),C(1,J,25,10,"div",15),i()),a&2){let e=p(2);r(),s("ngForOf",e.cartItems)}}function X(a,o){if(a&1){let e=b();t(0,"div",16)(1,"div",17),y(2,"img",18),i(),t(3,"div",19)(4,"h3",20),n(5),i(),t(6,"p",21),n(7),i(),t(8,"p",22),n(9),i(),t(10,"p",23),n(11),i()(),t(12,"div",29)(13,"div",25)(14,"button",26),_("click",function(){let l=u(e).$implicit,m=p(3);return x(m.decreaseQuantity(l))}),n(15,"-"),i(),t(16,"span"),n(17),i(),t(18,"button",26),_("click",function(){let l=u(e).$implicit,m=p(3);return x(m.increaseQuantity(l))}),n(19,"+"),i()(),t(20,"p",27),n(21),g(22,"currency"),i(),t(23,"button",28),_("click",function(){let l=u(e).$implicit,m=p(3);return x(m.removeItemLocal(l))}),n(24,"\u{1F5D1}\uFE0F"),i()()()}if(a&2){let e=o.$implicit;r(2),s("src",e.img,S),r(3),d(e.name),r(2),v("Scarpa \u2013 ",e.category,""),r(2),v("Colore \u2013 ",e.color,""),r(2),v("Taglia/misura: ",e.size,""),r(6),d(e.quantity),r(4),d(f(22,7,e.price*e.quantity,"EUR"))}}function Y(a,o){if(a&1&&C(0,X,25,10,"div",15),a&2){let e=p(2);s("ngForOf",e.cartItems)}}function Z(a,o){if(a&1&&(t(0,"div",5)(1,"h1"),n(2,"Carrello"),i(),t(3,"div",6)(4,"div",7),C(5,A,3,0,"div",8)(6,K,2,1,"div",9)(7,Y,1,1,"ng-template",null,2,h),i(),t(9,"div",10)(10,"h3"),n(11,"Riepilogo"),i(),t(12,"div",11)(13,"span"),n(14,"Subtotale"),i(),t(15,"span"),n(16),g(17,"async"),g(18,"currency"),i()(),t(19,"div",11)(20,"span"),n(21,"Costi di spedizione"),i(),t(22,"span"),n(23,"Gratis"),i()(),t(24,"div",12)(25,"span"),n(26,"Totale"),i(),t(27,"span"),n(28),g(29,"async"),g(30,"currency"),i()(),t(31,"button",13),n(32,"Vai al pagamento"),i()()()()),a&2){let e=E(8),c=p();r(3),s("ngClass",w(16,G,!c.Desktop)),r(2),s("ngIf",!c.cartItems.length),r(),s("ngIf",c.userId)("ngIfElse",e),r(10),d(f(18,8,I(17,6,c.subtotal$),"EUR")),r(12),d(f(30,13,I(29,11,c.total$),"EUR"))}}function ee(a,o){a&1&&(t(0,"div",14)(1,"h2"),n(2,"Il tuo carrello e\u0300 vuoto"),i()())}function te(a,o){if(a&1){let e=b();t(0,"div",16)(1,"div",17),y(2,"img",18),i(),t(3,"div",19)(4,"h3",20),n(5),i(),t(6,"p",21),n(7),i(),t(8,"p",22),n(9),i(),t(10,"p",23),n(11),i()(),t(12,"div",24)(13,"div",25)(14,"button",26),_("click",function(){let l=u(e).$implicit,m=p(3);return x(m.decreaseQuantity(l))}),n(15,"-"),i(),t(16,"span"),n(17),i(),t(18,"button",26),_("click",function(){let l=u(e).$implicit,m=p(3);return x(m.increaseQuantity(l))}),n(19,"+"),i()(),t(20,"p",27),n(21),g(22,"currency"),i(),t(23,"button",28),_("click",function(){let l=u(e).$implicit,m=p(3);return x(m.removeItemLocal(l))}),n(24,"\u{1F5D1}\uFE0F"),i()()()}if(a&2){let e=o.$implicit;r(2),s("src",e.img,S),r(3),d(e.name),r(2),v("Scarpa \u2013 ",e.category,""),r(2),v("Colore \u2013 ",e.color,""),r(2),v("Taglia/misura: ",e.size,""),r(6),d(e.quantity),r(4),d(f(22,7,e.price*e.quantity,"EUR"))}}function ie(a,o){if(a&1&&(t(0,"div"),C(1,te,25,10,"div",15),i()),a&2){let e=p(2);r(),s("ngForOf",e.cartItems)}}function ne(a,o){if(a&1){let e=b();t(0,"div",16)(1,"div",17),y(2,"img",18),i(),t(3,"div",19)(4,"h3",20),n(5),i(),t(6,"p",21),n(7),i(),t(8,"p",22),n(9),i(),t(10,"p",23),n(11),i()(),t(12,"div",29)(13,"div",25)(14,"button",26),_("click",function(){let l=u(e).$implicit,m=p(3);return x(m.decreaseQuantity(l))}),n(15,"-"),i(),t(16,"span"),n(17),i(),t(18,"button",26),_("click",function(){let l=u(e).$implicit,m=p(3);return x(m.increaseQuantity(l))}),n(19,"+"),i()(),t(20,"p",27),n(21),g(22,"currency"),i(),t(23,"button",28),_("click",function(){let l=u(e).$implicit,m=p(3);return x(m.removeItemLocal(l))}),n(24,"\u{1F5D1}\uFE0F"),i()()()}if(a&2){let e=o.$implicit;r(2),s("src",e.img,S),r(3),d(e.name),r(2),v("Scarpa \u2013 ",e.category,""),r(2),v("Colore \u2013 ",e.color,""),r(2),v("Taglia/misura: ",e.size,""),r(6),d(e.quantity),r(4),d(f(22,7,e.price*e.quantity,"EUR"))}}function re(a,o){if(a&1&&C(0,ne,25,10,"div",15),a&2){let e=p(2);s("ngForOf",e.cartItems)}}function ae(a,o){if(a&1&&(t(0,"div",30)(1,"h1"),n(2,"Carrello"),i(),t(3,"div",6)(4,"div",31),C(5,ee,3,0,"div",8)(6,ie,2,1,"div",9)(7,re,1,1,"ng-template",null,2,h),i(),t(9,"div",32)(10,"h3"),n(11,"Riepilogo"),i(),t(12,"div",11)(13,"span"),n(14,"Subtotale"),i(),t(15,"span"),n(16),g(17,"async"),g(18,"currency"),i()(),t(19,"div",11)(20,"span"),n(21,"Costi di spedizione"),i(),t(22,"span"),n(23,"Gratis"),i()(),t(24,"div",12)(25,"span"),n(26,"Totale"),i(),t(27,"span"),n(28),g(29,"async"),g(30,"currency"),i()(),t(31,"button",13),n(32,"Vai al pagamento"),i()()()()),a&2){let e=E(8),c=p();r(3),s("ngClass",w(16,G,!c.Desktop)),r(2),s("ngIf",!c.cartItems.length),r(),s("ngIf",c.userId)("ngIfElse",e),r(10),d(f(18,8,I(17,6,c.subtotal$),"EUR")),r(12),d(f(30,13,I(29,11,c.total$),"EUR"))}}function oe(a,o){a&1&&y(0,"app-footer",33)}function ce(a,o){a&1&&y(0,"app-footer",33)}var H=class a{constructor(o,e,c){this.cartService=o;this.productService=e;this.usersService=c}cartItems=[];userId=null;Desktop=!0;total$;subtotal$;onResize(){this.checkBodyWidth()}checkBodyWidth(){this.Desktop=document.body.clientWidth>810}ngOnInit(){this.checkBodyWidth(),this.userId=this.usersService.getUserId(),console.log("User ID in CartComponent:",this.userId),this.total$=this.cartService.total$,this.subtotal$=this.cartService.total$,this.cartService.cartItems$.pipe(M(o=>this.productService.getProducts().pipe(P(e=>o.map(c=>k(k({},c),e.find(l=>l.id===c.id_product))))))).subscribe(o=>{this.cartItems=o})}increaseQuantity(o){this.cartService.updateQuantityLocal(o,!0)}decreaseQuantity(o){this.cartService.updateQuantityLocal(o,!1)}removeItemLocal(o){this.cartService.removeFromCart(o)}trackById(o){return o.userID||0}static \u0275fac=function(e){return new(e||a)(O(j),O(q),O(L))};static \u0275cmp=D({type:a,selectors:[["app-cart"]],hostBindings:function(e,c){e&1&&_("resize",function(m){return c.onResize(m)},!1,T)},decls:7,vars:4,consts:[["mobile",""],["mobile1",""],["localCart",""],["class","cart-container p-5  ",4,"ngIf","ngIfElse"],["class","",4,"ngIf","ngIfElse"],[1,"cart-container","p-5"],[1,"cart-wrapper",3,"ngClass"],[1,"cart-items","me-5"],["class","empty-cart",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"summary-section","ms-5"],[1,"summary-item"],[1,"summary-total"],["routerLink","/checkout",1,"checkout-btn"],[1,"empty-cart"],["class","cart-item",4,"ngFor","ngForOf"],[1,"cart-item"],[1,"cart-item-image"],["alt","Immagine prodotto",3,"src"],[1,"item-details"],[1,"item-name"],[1,"item-category"],[1,"item-color"],[1,"item-size"],[1,"item-actions"],[1,"quantity-controls"],[3,"click"],[1,"item-price"],[1,"remove-btn",3,"click"],[1,"item-actions","d-flex","flex-column"],["id","cart",1,"cart-container","w-100"],[1,"cart-items","my-3"],[1,"summary-section","my-3"],[1,""]],template:function(e,c){if(e&1&&(y(0,"app-nav"),C(1,Z,33,18,"div",3)(2,ae,33,18,"ng-template",null,0,h)(4,oe,1,0,"app-footer",4)(5,ce,1,0,"ng-template",null,1,h)),e&2){let l=E(3),m=E(6);r(),s("ngIf",c.Desktop)("ngIfElse",l),r(3),s("ngIf",c.Desktop)("ngIfElse",m)}},dependencies:[R,V,$,z,F,B,N,W,Q,U],styles:["[_nghost-%COMP%]{display:block;min-height:100vh}.cart-container[_ngcontent-%COMP%]{display:block;margin:auto;padding:20px}.cart-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;font-size:8rem;margin-bottom:20px;color:#c7eeff}.cart-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}@media (max-width: 810px){.cart-wrapper[_ngcontent-%COMP%]{flex-direction:column}}.empty-cart[_ngcontent-%COMP%]{margin:auto}.cart-items[_ngcontent-%COMP%]{background-color:#fafafa;max-height:500px;border-radius:10px;overflow-y:auto;flex:2;display:flex;flex-direction:column;gap:15px;scrollbar-width:none}.cart-items[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0;display:none}.cart-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:15px;border-radius:10px;background:#fafafa}@media (max-width: 600px){.cart-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}.cart-item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:auto;border-radius:8px}.item-details[_ngcontent-%COMP%]{flex:1;min-width:200px}.item-details[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.item-details[_ngcontent-%COMP%]   .item-category[_ngcontent-%COMP%], .item-details[_ngcontent-%COMP%]   .item-color[_ngcontent-%COMP%], .item-details[_ngcontent-%COMP%]   .item-size[_ngcontent-%COMP%]{font-size:.9rem;color:#0077c0}.item-actions[_ngcontent-%COMP%]{align-items:center;gap:10px;justify-content:space-between}.item-actions[_ngcontent-%COMP%]   .quantity-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.item-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#0077c0;border:none;border-radius:10px;padding:5px 10px;cursor:pointer;font-size:1rem;transition:.3s;color:#fafafa}.item-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#c7eeff}.item-actions[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{background:#ff4d4d;color:#fff;border-radius:5px;padding:5px 10px}.summary-section[_ngcontent-%COMP%]{flex:1;padding:20px;border:1px solid #ddd;border-radius:10px;background:#f9f9f9;text-align:center}.summary-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:10px}.summary-section[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%], .summary-section[_ngcontent-%COMP%]   .summary-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 0;font-size:1rem}.summary-section[_ngcontent-%COMP%]   .checkout-btn[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1.2rem;background:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:.3s}.summary-section[_ngcontent-%COMP%]   .checkout-btn[_ngcontent-%COMP%]:hover{background:#0056b3}@media (max-width: 800px){#cart[_ngcontent-%COMP%]{height:100%!important}}"]})};export{H as CartComponent};
